name: Test SSH Connection

on:
  workflow_dispatch:  # Allows manual trigger

jobs:
  test-ssh:
    runs-on: ubuntu-latest
    steps:
      - name: Test SSH connection and project directory
        uses: appleboy/ssh-action@v0.1.6
        with:
          host: ${{ secrets.SSH_HOST }}
          username: ${{ secrets.SSH_USERNAME }}
          key: ${{ secrets.SSH_PRIVATE_KEY }}
          passphrase: ${{ secrets.SSH_KEY_PASSPHRASE }}
          port: 22  # change if your SSH uses a different port
          debug: true
          script: |
            echo "✅ SSH Connection Successful!"
            echo "👤 Connected as: $(whoami)"
            echo "📁 Current directory: $(pwd)"
            echo "📍 Your project path: /home/riponcod/public_html"
            echo "🐧 Server info: $(uname -a)"
            echo "Checking project directory..."
            cd /home/riponcod/public_html
            echo "✅ Directory exists!"
            echo "📋 Contents:"
            ls -la
            echo "🚀 Ready for deployment"
