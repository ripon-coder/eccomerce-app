name: Test SSH Connection

on:
  workflow_dispatch:  # Allows manual run

jobs:
  test-ssh:
    runs-on: ubuntu-latest
    steps:
      - name: Test basic SSH connection
        uses: appleboy/ssh-action@v0.1.6
        with:
          host: ${{ secrets.SSH_HOST }}
          username: ${{ secrets.SSH_USERNAME }}
          key: ${{ secrets.SSH_PRIVATE_KEY }}
          passphrase: ${{ secrets.SSH_KEY_PASSPHRASE }}
          script: |
            echo "âœ… SSH Connection Successful!"
            echo "ğŸ‘¤ Connected as: $(whoami)"
            echo "ğŸ“ Current directory: $(pwd)"
            echo "ğŸ“ Your project path: /home/mybouma/test.mybouma.com"
            echo "ğŸ§ Server info: $(uname -a)"
            
      - name: Test project directory access
        uses: appleboy/ssh-action@v0.1.6
        with:
          host: ${{ secrets.SSH_HOST }}
          username: ${{ secrets.SSH_USERNAME }}
          key: ${{ secrets.SSH_PRIVATE_KEY }}
          passphrase: ${{ secrets.SSH_KEY_PASSPHRASE }}
          script: |
            echo "Checking your project directory..."
            cd /home/mybouma/test.mybouma.com
            echo "âœ… Directory exists!"
            echo "ğŸ“‹ Contents:"
            ls -la
            echo "ğŸš€ Ready for deployment"
